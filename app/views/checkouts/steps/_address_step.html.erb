<% order = form.object %>

<div class="flex flex-col w-full">
  <fieldset class="flex flex-col" id="billing">
    <legend>
      <%= t("spree.billing_address") %>
    </legend>

    <%= form.fields_for :bill_address do |bill_form| %>
      <%= render(
        "checkouts/steps/address_step/address_inputs",
        form: bill_form,
        address_type: "billing",
        address: order.bill_address
      ) %>
    <% end %>
  </fieldset>

  <fieldset class="address-step__shipping" id="shipping">
    <legend class="text-lg font-semibold mb-2">
      <%= t('spree.shipping_address') %>
    </legend>

    <%= form.fields_for :ship_address do |ship_form| %>
      <%= label_tag 'order_use_billing', class: 'flex align-center' do %>
        <%= check_box_tag('order[use_billing]', 1, order.shipping_eq_billing_address?, class: "checkbox checkbox-primary mb-4 mr-2") %>
        <p><%= t('spree.use_billing_address') %></p>
      <% end %>

      <%= render(
        "checkouts/steps/address_step/address_inputs",
        form: ship_form,
        address_type: "shipping",
        address: order.ship_address
       ) %>
    <% end %>
  </fieldset>

  <div class="flex justify-end">
    <div class="flex flex-col">
    <%= form.button(
      I18n.t("spree.save_and_continue"),
      class: 'btn btn-primary btn-lg mb-4',
      name: :commit
    ) %>

    <% if spree_current_user %>
      <%= label_tag 'save-user-address', class: 'flex align-center' do %>
        <%= check_box_tag(
          :save_user_address,
          1,
          spree_current_user.respond_to?(:persist_order_address),
          id: 'save-user-address',
          class: "checkbox checkbox-primary mr-2"
        ) %>
        <p><%= I18n.t("spree.save_my_address") %></p>
      <% end %>
    <% end %>
  </div>
</div>
