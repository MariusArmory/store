<% variant = line_item.variant %>

<%= order_form.fields_for :line_items, line_item do |item_form| %>
  <article class="flex items-start justify-between flex-wrap">

    <section class="flex">
      <%= link_to(
        render(ImageComponent.new(
          image: variant.gallery.images.first || variant.product.gallery.images.first,
          size: :small
        )),
        variant.product,
        class: 'w-64 h-auto mr-4'
      ) %>

      <div class="">

        <%= render(
          'orders/item_info',
          line_item: line_item,
          variant: variant,
          classes: ['cart-item__info']
        ) %>

        <div class="mt-4">
          <%= item_form.text_field :quantity, type: 'number', min: 0, class: "input max-w-[100px] mr-0 md:mr-2" %>

          <%= order_form.submit(
            'Remove',
            class: 'link link-error',
            id: "delete_#{dom_id(line_item)}",
            data: { disable_with: 'Remove' }
          ) %>
        </div>

      </div>

    </section>

      <div>
      <%= line_item.single_money.to_html %>
      </div>

    <strong><%= line_item.display_amount.to_html unless line_item.quantity.nil? %></strong>
  </article>

  <div class="divider"></div>
<% end %>
